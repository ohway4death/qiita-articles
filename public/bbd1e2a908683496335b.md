---
title: Amazon Bedrockを使ってみた
tags:
  - AWS
  - bedrock
private: false
updated_at: '2024-12-02T07:04:13+09:00'
id: bbd1e2a908683496335b
organization_url_name: null
slide: false
ignorePublish: false
---
# 背景
社内でAWS勉強会を開催すべく、ネタ探しのためにBedrockを使おうとしたら色々と躓いたので、自分への備忘録として残しておく。

# モデルアクセスのリクエストができない。。。
早速使おうとしたがモデルへのアクセス権がないといわれる。
モデルアクセスにアクセスしてみてもアクセス権が付与できない。
![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/272113/c9cafcf2-5ff1-bae3-04f8-72fc058e5f86.png)

rootアカウントでも同じ画面が表示され、有効化できないどうすればええんや。。。

# 助けて！AWSサポートさん！！

使用不可のところにカーソルを合わせると以下の文章が表示された。

> This model is unavailable. To enable access to this model, contact support . Note that your request may be fully approved, partially approved, or denied to maintain service performance and ensure appropriate usage of Amazon Bedrock.

拒否するかもしれないけど、サポートにいったん問い合わせてねという感じの記載。とりあえずサポートセンターから問い合わせてみることに。私用のアカウントであるためベーシックプランを利用している。技術サポートは受けれないため「アカウントと請求」から以下のような形でケースを作成した。

![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/272113/ae9bc02d-7be7-8c84-02ab-e55fbc3ee454.png)

追加情報にはBedrockでモデルを利用したい旨を記載して問い合わせを実施。

すると2日後に返信が来ました。
![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/272113/399c830f-717b-c6ae-dc1a-ccf955957250.png)

Bedrockを確認してみるとモデルをリクエストできるようになっていました。

![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/272113/ea45120c-a480-3a77-c63e-34bae5a79cb8.png)

しかし、いざClaude 3.5 Sonnetにチェックを入れてモデルアクセスをリクエストしようとすると。。。
![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/272113/f555ffa8-4e75-9646-de92-e96ea9629f33.png)

個人用だが何かしら登録しないと進まないのでとりあえず所属している会社を登録した。

モデルアクセスをリクエストするとなんと数分でリクエストが通りアクセスが付与されました！！

![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/272113/769927cd-ab70-6f52-6e25-02c7de60d400.png)

# 早速Bedrock playgroundでClaudeを使ってみた！
左側のメニューより「プレイグラウンド＞Chat/text」をクリック。
「モデルを選択」というのが出てくるのでこれをクリック。
![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/272113/f1c9030e-d639-f377-2e51-73d428d6403f.png)

モデルを選択してみると「3.スループット」に「オンデマンド」と「APAC Anthropic Claude 3.5 Sonnet」というのが表示されている。
「スループット」とはモデルが処理して返すことができる入力と出力の数のレートを示しており、「オンデマンド」にすると使用量に応じて課金が発生する形になり、標準的なスループットとなる。もう一つの「APAC Anthropic Claude 3.5 Sonnet」というのは「プロビジョンドスループット」にあたり、特定のユニット数を先に購入してコストが固定になる代わりに高いレベルのスループットを確保できるというものになる。

今回はお試しで利用したいので、「オンデマンド」を選択。

これによりプロンプトを入力できるようになり、無事に利用することができました！！
（Claudeさんからコメントもいただいています↓）
![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/272113/09c5d4f1-2a59-3105-78d1-8a8e55921b97.png)

# 最後に
これでBedrock × Claudeで遊べるぞ！！
頑張って勉強会の資料を作らねば。。。
